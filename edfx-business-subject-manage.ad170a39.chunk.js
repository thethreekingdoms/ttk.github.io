webpackJsonp([20],{1111:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0;var a,i=p(n(0)),c=p(n(12)),l=p(n(7)),u=p(n(9)),r=p(n(10)),o=p(n(11)),d=n(1),f=(p(d),n(45)),s=p(n(670));function p(e){return e&&e.__esModule?e:{"default":e}}var m=(0,f.wrapper)(s["default"])(a=function(e){function t(){return(0,l["default"])(this,t),(0,r["default"])(this,(t.__proto__||(0,c["default"])(t)).apply(this,arguments))}return(0,o["default"])(t,e),(0,u["default"])(t,[{key:"render",value:function(){return this.props.monkeyKing((0,i["default"])({},this.props,{path:"root"}))}}]),t}(d.Component))||a;t["default"]=m,e.exports=t["default"]},1112:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c=a(n(0)),v=a(n(83)),i=a(n(84)),l=a(n(7));t["default"]=function(e){var t=new r.action(e),n=s["default"].actionCreator((0,c["default"])({},e,{metaAction:t})),a=new m((0,c["default"])({},e,{metaAction:t,extendAction:n})),i=(0,c["default"])({},t,n.gridAction,a);return t.config({metaHandlers:i}),i};var u=a(n(1)),r=n(45),o=n(59),d=a(n(469)),f=a(n(1242)),s=a(n(1243));function a(e){return e&&e.__esModule?e:{"default":e}}var N=void 0,p=[],m=function e(t){var n,a,h=this;(0,l["default"])(this,e),this.onInit=function(e){var t=e.component,n=e.injections;h.extendAction.gridAction.onInit({component:t,injections:n}),h.component=t,h.injections=n,h.component.props.setOkListener&&h.component.props.setOkListener(h.onOk),n.reduce("init"),h.load()},this.load=(n=(0,i["default"])(v["default"].mark(function e(t){var n,a,i;return v["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=!(a=n=void 0),h.metaAction.sf("data.loading",!0),t&&(i=t.isReloadTree),!i){e.next=14;break}return e.next=6,h.webapi.accountType.getAccountTree();case 6:return n=e.sent,e.next=9,h.webapi.accountType.getAccountList(n[0].children[0].id);case 9:N=e.sent,h.metaAction.sf("data.other.treeId",n[0].children[0].id),h.metaAction.sf("data.other.tree",n),e.next=19;break;case 14:return n=h.metaAction.gf("data.other.tree"),e.next=17,h.webapi.accountType.getAccountList(t.accountType);case 17:N=e.sent,h.metaAction.sf("data.other.treeId",t.accountType);case 19:p=[],N.map(function(e,t){1==e.influenceList.length?p.push({key:t,influence0:N[t].influenceList[0].influenceValue,subject:N[t].accountCode+"-"+N[t].accountName}):2==e.influenceList.length?p.push({key:t,influence0:N[t].influenceList[0].influenceValue,influence1:N[t].influenceList[1].influenceValue,subject:N[t].accountCode+"-"+N[t].accountName}):3==e.influenceList.length?p.push({key:t,influence0:N[t].influenceList[0].influenceValue,influence1:N[t].influenceList[1].influenceValue,influence2:N[t].influenceList[2].influenceValue,subject:N[t].accountCode+"-"+N[t].accountName}):4==e.influenceList.length&&p.push({key:t,influence0:N[t].influenceList[0].influenceValue,influence1:N[t].influenceList[1].influenceValue,influence2:N[t].influenceList[2].influenceValue,influence3:N[t].influenceList[3].influenceValue,subject:N[t].accountCode+"-"+N[t].accountName})}),(a={resTree:n,resAccountList:N,resTableList:p})&&h.injections.reduce("load",a),h.metaAction.sf("data.loading",!1);case 24:case"end":return e.stop()}},e,h)})),function(e){return n.apply(this,arguments)}),this.selectType=function(e,t){if(!(0==t.selected||t.selectedNodes[0]&&t.selectedNodes[0].props.dataRef.children)){var n={isReloadTree:!1,accountType:t.selectedNodes[0]&&t.selectedNodes[0].props.dataRef.id};h.load(n)}},this.renderTreeNodes=function(e){return e?e.map(function(e){return e.children?u["default"].createElement(o.Tree.TreeNode,{title:e.name,key:e.id,dataRef:e},h.renderTreeNodes(e.children)):u["default"].createElement(o.Tree.TreeNode,{title:e.name,key:e.id,dataRef:e})}):u["default"].createElement("div",null)},this.influenceFactorSpan=function(e,t,n){return{children:u["default"].createElement("span",{title:e},e)}},this.subjectSpan=function(e,t,n){return{children:u["default"].createElement("span",{title:e},e),props:{colSpan:1}}},this.handle=function(e,t,n){return{children:u["default"].createElement("a",{href:"javascript:;"},u["default"].createElement(o.Icon,{fontFamily:"edficon",type:"bianji",style:{fontSize:"24px"},onClick:function(){return h.openCard(e,t,n)}}))}},this.openCard=(a=(0,i["default"])(v["default"].mark(function e(t,n,a){var i,c,l,u,r,o,d,f,s,p,m;return v["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=[],c=[],void 0,"influence3"in n&&i.push(n.influence3),"influence2"in n&&i.push(n.influence2),"influence1"in n&&i.push(n.influence1),"influence0"in n&&i.push(n.influence0),N[0].influenceList.map(function(e){c.push(e.influence)}),l=n.subject,u=N[a].templateUserId,r=N[a].templateAccountTypeId,o=N[a].accountCode,d=N[a].influence,f=N[a].influenceValue,s=N[a].ts,p=h.metaAction.gf("data.other.treeId"),e.next=16,h.metaAction.modal("show",{title:"影响因素",wrapClassName:"asset-card",width:400,okText:"确定",bodyStyle:{padding:"10px 24px"},children:h.metaAction.loadApp("edfx-business-subject-card",{store:h.component.props.store,initButtionValue:{influencetitArr:c,influenceArr:i,subject:l,templateUserId:u,templateAccountTypeId:r,accountCode:o,influence:d,influenceValue:f,ts:s}})});case 16:e.sent&&(m={isReloadTree:!1,accountType:p},h.load(m));case 18:case"end":return e.stop()}},e,h)})),function(e,t,n){return a.apply(this,arguments)}),this.tableColumns=function(){var e=[h.influenceFactorSpan,h.subjectSpan,h.handle];h.injections.reduce("normalSearchChange",{path:"colSpan",value:2});var t=h.metaAction.gf("data.other.list");if(t)return f["default"].apply(void 0,[t].concat(e))},this.metaAction=t.metaAction,this.extendAction=t.extendAction,this.config=d["default"].current,this.webapi=this.config.webapi};e.exports=t["default"]},1113:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r(n(0)),c=r(n(7));t["default"]=function(e){var t=new i.reducer(e),n=new o((0,a["default"])({},e,{metaReducer:t}));return(0,a["default"])({},t,n)};var l=n(14),i=n(45),u=(r(n(469)),n(671));function r(e){return e&&e.__esModule?e:{"default":e}}var o=function e(t){var i=this;(0,c["default"])(this,e),this.init=function(e,t){var n=(0,u.getInitState)();return i.metaReducer.init(e,n)},this.load=function(e,t){return e=i.metaReducer.sf(e,"data.other.tree",(0,l.fromJS)(t.resTree)),e=i.metaReducer.sf(e,"data.other.list",(0,l.fromJS)(t.resAccountList)),e=i.metaReducer.sf(e,"data.other.tableList",(0,l.fromJS)(t.resTableList))},this.normalSearchChange=function(e,t){var n=t.path,a=t.value;return i.metaReducer.sf(e,n,(0,l.fromJS)(a))},this.metaReducer=t.metaReducer};e.exports=t["default"]},1242:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e){var n=[{fieldName:"influence",fieldTitle:"影响因素",fieldParentName:null},{fieldName:"subject",fieldTitle:"对应科目",fieldParentName:null},{fieldName:"handle",fieldTitle:"操作",fieldParentName:null}],a=void 0;if(e&&0!=(l=e.toJS()).length){(a=l[0].influenceList).map(function(e,t){n.push({fieldName:"influence"+t,fieldTitle:a[t].influence,fieldParentName:"influence"})});for(var t=arguments.length,i=Array(1<t?t-1:0),c=1;c<t;c++)i[c-1]=arguments[c];return function(e){for(var t=arguments.length,n=Array(1<t?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];var i=[];if(!e||e.length<1)return i;e.forEach(function(e){if(!e.fieldParentName){var t=void 0;t="influence"==e.fieldName?{title:e.fieldTitle,name:e.fieldName,dataIndex:e.fieldName,key:e.fieldName,render:n[0],width:"400px"}:"subject"==e.fieldName?{title:e.fieldTitle,name:e.fieldName,dataIndex:e.fieldName,key:e.fieldName,render:n[1],width:"320px"}:{title:e.fieldTitle,name:e.fieldName,dataIndex:e.fieldName,key:e.fieldName,render:n[2],width:"180px"},i.push(t)}});var c=[];e.forEach(function(e){if(e.fieldParentName&&e.fieldParentName===i[0].name){var t={title:e.fieldTitle,name:e.fieldName,dataIndex:e.fieldName,className:"amountColumnStyle",key:e.fieldName,render:n[0]};c.push(t)}}),c&&0<c.length&&(i[0].children=c);return i}.apply(void 0,[n].concat(i))}};var a,i=n(1);(a=i)&&a.__esModule;var l=void 0;e.exports=t["default"]},1243:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,i=n(0),c=(a=i)&&a.__esModule?a:{"default":a},l=n(59);t["default"]={actionCreator:function(e){return{gridAction:new l.GridDecorator.action((0,c["default"])({},e,{gridOption:{dataGrid:{path:"data.list",selectFieldName:"selected",cellClassName:"app-archives-list-cell",emptyRow:{},getColNames:function(e){return[]},cellIsReadonly:function(e,t,n){return!1}}}}))}},reducerCreator:function(e){return{gridReducer:new l.GridDecorator.reducer((0,c["default"])({},e,{gridOption:{dataGrid:{path:"data.list",selectFieldName:"selected",cellClassName:"app-archives-list-cell",emptyRow:{},getColNames:function(e){return[]},cellIsReadonly:function(e,t,n){return!1}}}}))}}},e.exports=t["default"]}});
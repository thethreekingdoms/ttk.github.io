webpackJsonp([37],{1114:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0;var a,r=p(n(0)),o=p(n(12)),c=p(n(7)),i=p(n(9)),u=p(n(10)),s=p(n(11)),d=n(1),l=(p(d),n(45)),f=p(n(672));function p(e){return e&&e.__esModule?e:{"default":e}}var m=(0,l.wrapper)(f["default"])(a=function(e){function t(){return(0,c["default"])(this,t),(0,u["default"])(this,(t.__proto__||(0,o["default"])(t)).apply(this,arguments))}return(0,s["default"])(t,e),(0,i["default"])(t,[{key:"render",value:function(){return this.props.monkeyKing((0,r["default"])({},this.props,{path:"root"}))}}]),t}(d.Component))||a;t["default"]=m,e.exports=t["default"]},1115:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c=d(n(0)),l=d(n(83)),a=d(n(84)),r=d(n(7));t["default"]=function(e){var t=new i.action(e),n=s["default"].actionCreator((0,c["default"])({},e,{metaAction:t})),a=u.FormDecorator.actionCreator((0,c["default"])({},e,{metaAction:t})),r=new f((0,c["default"])({},e,{metaAction:t,extendAction:n,voucherAction:a})),o=(0,c["default"])({},t,n.gridAction,a,r);return t.config({metaHandlers:o}),o};d(n(1));var i=n(45),u=n(59),o=d(n(470)),s=d(n(1244));function d(e){return e&&e.__esModule?e:{"default":e}}var f=function e(t){var d=this;(0,r["default"])(this,e),this.onInit=function(e){var t=e.component,n=e.injections;d.extendAction.gridAction.onInit({component:t,injections:n}),d.component=t,d.injections=n,d.component.props.setOkListener&&d.component.props.setOkListener(d.onOk),n.reduce("init"),d.load()},this.load=(0,a["default"])(l["default"].mark(function e(){var t,n,a,r,o,c,i,u;return l["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={},n=d.component.props.initButtionValue,a=n.influencetitArr,r=n.influenceArr,o=n.subject,c=n.accountCode,i=[],r=r.reverse(),a.map(function(e,t){i.push({influence:a[t],influenceValue:r[t]})}),d.metaAction.sf("data.form.codeAndName",o),d.metaAction.sf("data.other.subjectCode",c),d.metaAction.sf("data.other.loading",!0),e.next=10,d.webapi.accountCard.getSubject();case 10:t=e.sent,u={response:t,influenceList:i,subject:o},d.injections.reduce("load",u),d.metaAction.sf("data.other.loading",!1);case 14:case"end":return e.stop()}},e,d)})),this.fieldChange=function(e,t){d.voucherAction.fieldChange(e,t,d.check)},this.selectSubject=function(){return function(e){var t=d.metaAction.gf("data.other.subjectList");if(t){var n=t.toJS()[e.split(",")[1]].codeAndName,a=t.toJS()[e.split(",")[1]].code;d.fieldChange("data.form.codeAndName",n),d.metaAction.sf("data.other.subjectCode",a)}}},this.onOk=function(){return d.saveSubject({})},this.saveSubject=(0,a["default"])(l["default"].mark(function e(){var t,n,a,r,o,c,i,u,s;return l["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=d.component.props.initButtionValue,n=t.templateUserId,a=t.templateAccountTypeId,r=t.accountCode,o=t.influence,c=t.influenceValue,i=t.ts,u=d.metaAction.gf("data.other.subjectCode"),r!=u){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,d.metaAction.modal("confirm",{title:"提示",content:"您手工改动了预置科目，将会影响到以后生成的相关凭证哦，请确认修改！"});case 6:if(!e.sent){e.next=24;break}if(s=void 0,!n){e.next=15;break}return e.next=12,d.webapi.accountCard.saveAccountType({id:n,templateAccountTypeId:a,influence:o,influenceValue:c,accountCode:u,ts:i});case 12:s=e.sent,e.next=18;break;case 15:return e.next=17,d.webapi.accountCard.saveAccountType({id:n,templateAccountTypeId:a,influence:o,influenceValue:c,accountCode:u});case 17:s=e.sent;case 18:if(!s||0!=s.result){e.next=22;break}d.metaAction.toast("error",s.error.message),e.next=24;break;case 22:return d.metaAction.toast("success","修改成功"),e.abrupt("return",s);case 24:case"end":return e.stop()}},e,d)})),this.metaAction=t.metaAction,this.extendAction=t.extendAction,this.voucherAction=t.voucherAction,this.config=o["default"].current,this.webapi=this.config.webapi};e.exports=t["default"]},1116:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,r,o=d(n(0)),c=d(n(7));t["default"]=function(e){var t=new u.reducer(e),n=new l((0,o["default"])({},e,{metaReducer:t}));return(0,o["default"])({},t,n)};var i=n(14),u=n(45),s=(d(n(470)),n(673));function d(e){return e&&e.__esModule?e:{"default":e}}var l=(a=function e(t){(0,c["default"])(this,e),r.call(this),this.metaReducer=t.metaReducer},r=function(){var a=this;this.init=function(e,t){var n=(0,s.getInitState)();return a.metaReducer.init(e,n)},this.load=function(e,t){return t&&t.response&&(e=a.metaReducer.sf(e,"data.other.subject",(0,i.fromJS)(t.response.subject))),t&&t.response&&(e=a.metaReducer.sf(e,"data.other.subjectList",(0,i.fromJS)(t.response.glAccounts))),t&&t.influenceList&&(e=a.metaReducer.sf(e,"data.other.influenceList",(0,i.fromJS)(t.influenceList))),e}},a);e.exports=t["default"]},1244:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,r=n(0),o=(a=r)&&a.__esModule?a:{"default":a},c=n(59);t["default"]={actionCreator:function(e){return{gridAction:new c.GridDecorator.action((0,o["default"])({},e,{gridOption:{dataGrid:{path:"data.list",selectFieldName:"selected",cellClassName:"app-archives-list-cell",emptyRow:{},getColNames:function(e){return[]},cellIsReadonly:function(e,t,n){return!1}}}}))}},reducerCreator:function(e){return{gridReducer:new c.GridDecorator.reducer((0,o["default"])({},e,{gridOption:{dataGrid:{path:"data.list",selectFieldName:"selected",cellClassName:"app-archives-list-cell",emptyRow:{},getColNames:function(e){return[]},cellIsReadonly:function(e,t,n){return!1}}}}))}}},e.exports=t["default"]}});